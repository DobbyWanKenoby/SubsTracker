# SubsTracker


Приложение "SubsTracker" - менеджер подписок и регулярных платежей для iOS. Проект создан в учебных целях.

**Используемая архитектура:** MVC + Координаторы/Микросервисы на основе SwiftCoordinatorsKit

# Описание SwiftCoordinatorsKit

> SwiftCoordinatorsKit находится в стадии разработки и еще не выделен в отдельный проект. Вся документация на ведется в данном репозитории.

**SwiftCoordinatorsKit** (SCK) позволяет создать в проекте множество Координаторов, главная цель которых - обеспечение максимально низкой связанности между элементами приложения (в частности между вью контроллерами). Координаторы берут на себя задачу решения множества задач, в то числе управление отображением сцен и передачу между ними данных. Таким образом сцены становятся независимыми друг от друга, так как работают через "посредников" - координаторов.

## Возможности координаторов

**Координатор** - это экземпляр класса, подписанного на один или несколько протоколов. Координаторы обязательно выполняются следующую задачу:

- Хранение иерархии координаторов.
	
	Координаторы реализуют структуру данных "Дерево", где у каждого координатора может быть один родитель и произвольное количество сыновей. Обычно приложение имеет один главный координатор приложения (ApplicationCoordinator) и множество дочерних, каждый из которых имеет свое множество дочерних координаторов, и т.д.

Также координаторы (в зависимости от протоколов, на которые они подписаны, могут выполнять следующие задачи:

1. Управление передачей данных внутри приложения (между сценами и координаторами).

	Благодаря тому, что координаторы хранят ссылки друг на друга, обеспечивается легкая передача данных внутри приложения.
	
	> **Пример**
	> 
	> Если на одном из экранов приложения создается некий объект, который должен быть распространен на другие экраны, то данные могут передаваться по иерархии координаторов, пока е достуигнут места (или мест) назначения. Например, экран создания "Заметки" недолжен создавать заметку, од должен лишь предоставлять интерфейс для ее создания. Далее "Заметка" упаковывается в специальный объект и отправляется по иерархии координаторов. При достижении экрана со списком заметок она добавляется в него, а при достижении координатора, обеспечивающего сохранение заметок - она сохраняется.

2. Управление отображением сцен.

	Координаторы определяют, какие сцены и в какой момент должны быть отображены.

3. Управление работой Микросервисов в приложении.

	> 	В разработке

## Координаторы и потоки (flow) 

Координатор создается, когда в приложении необходимо выделить решение некоторой задачи. В контексте SCK такие задачи называются **потоками** (flow). Задачи - это условное наименование решаемых задач и в практике не используется при написании программного кода (за исключением названия методов `startFlow` и `finishFlow`). 

> **Пример**
> 
> Координатор `ApplicationCoordinator` может решать задачу обеспечения работы приложеняи в целом, в частности определения стартового экрана (в завиисмости от того, залогинен ли пользователь), загрузку вспомогательных библиотек и т.д. Образно говоря, он создает поток `Application`.
> 
> Координатор `AuthCoordinator` (будет дочерним по отношению к `ApplicationCoordinator`) может обеспечивать работу авторизированного пользователя и предоставлять доступ к соответствующим сценам (главынй экран приложения, экран настроек и т.д.).
> 
> Координатор `NotAuthCoordinator` (будет дочерним по отношению к `ApplicationCoordinator`) может обеспечивать работу неавторизированного пользователя и предоставлять доступ к соответствующим сценам (экран авторизации, регистрации и т.д.).

Дочерние координаторы функционируют в рамках родительского потока и создают свой собственный.

## Использование Координаторов


### protocol Coordinator

Базовый протокол, на который должен быть подписан любой Координатор. Его единственная задача - обеспечить хранение древовидной структуры координаторов.

#### Доступные элементы протокола
- Свойство ```init(```

Пример использования

```swift
class TestCoordinator: Coordinator {}

\\ создание координатора
let mainCoordinator = TestCoordinator()
let childcoordinator = TestCoordinator(rootCoordinator: mainCoordinator)

\\ доступные свойства
mainCoordinator.rootCoordinator \\ nil
childcoordinator.rootCoordinator \\ TestCoordinator

mainCoordinator.childCoordinators \\ Array of Coordinators
childcoordinator.childCoordinators \\ []
```




